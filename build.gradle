apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'shadow'

group = 'com.greatmancode'
version = '3.1.6-SNAPSHOT'

description = "Craftconomy3"

sourceCompatibility = 1.6
targetCompatibility = 1.6

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:0.8'
    }
}

repositories {
     mavenCentral()
     maven { url "http://oss.sonatype.org/content/repositories/snapshots" }
     maven { url "http://repo.bukkit.org/content/groups/public/" }
     maven { url "http://repo.greatmancode.com/content/groups/public/" }
     maven { url "http://repo.maven.apache.org/maven2" }
     maven { url "http://repo2.visualillusionsent.net/repository/public/"}
}
dependencies {
    compile group: 'com.greatmancode', name: 'tools', version:'1.0-SNAPSHOT'
    testCompile group: 'junit', name: 'junit', version:'4.10'
    testCompile group: 'org.bukkit', name: 'bukkit', version:'1.7.5-R0.1-SNAPSHOT'
    testCompile group: 'org.reflections', name: 'reflections', version:'0.9.9-RC1'
    testCompile group: 'org.xerial', name: 'sqlite-jdbc', version:'3.7.15-M1'
    testCompile group: 'mysql', name: 'mysql-connector-java', version:'5.1.26'
    compile group: 'org.projectlombok', name: 'lombok', version:'1.12.2'
}
shadow {
    artifactSet {
        include 'com.greatmancode:tools'
    }
    relocation {
        pattern = 'com.greatmancode.tools'
        shadedPattern = 'com.greatmancode.craftconomy3.tools'
    }
    relocation {
        pattern = 'com.alta189'
        shadedPattern = 'com.greatmancode.alta189'
    }
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}